<script setup>
import { ref } from "vue";

const underlineStyle = ref({ left: "0px", width: "0px", opacity: "0" });
const isDropdownOpen = ref(false);

const setUnderline = (event) => {
  const target = event.currentTarget;
  underlineStyle.value = {
    left: `${target.offsetLeft}px`,
    width: `${target.offsetWidth}px`,
    opacity: "1",
    transition: "left 0.3s ease, width 0.3s ease",
  };
};

const resetUnderline = () => {
  if (!isDropdownOpen.value) {
    underlineStyle.value.opacity = "0";
  }
};

const openDropdown = (event) => {
  isDropdownOpen.value = true;
  setUnderline(event);
};

const closeDropdown = () => {
  isDropdownOpen.value = false;
  resetUnderline();
};
</script>

<template>
  <nav
    class="fixed w-full z-9999 bg-[#1E555C] text-white p-4 px-12 flex items-center justify-between font-noto-sans-thai"
  >
    <a href="#" class="cursor-pointer">
      <svg
        width="200"
        height="30"
        viewBox="0 0 259 30"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M20.12 9.8C19.6133 8.86667 18.88 8.16 17.92 7.68C16.9867 7.17333 15.88 6.92 14.6 6.92C12.3867 6.92 10.6133 7.65333 9.28 9.12C7.94667 10.56 7.28 12.4933 7.28 14.92C7.28 17.5067 7.97333 19.5333 9.36 21C10.7733 22.44 12.7067 23.16 15.16 23.16C16.84 23.16 18.2533 22.7333 19.4 21.88C20.5733 21.0267 21.4267 19.8 21.96 18.2H13.28V13.16H28.16V19.52C27.6533 21.2267 26.7867 22.8133 25.56 24.28C24.36 25.7467 22.8267 26.9333 20.96 27.84C19.0933 28.7467 16.9867 29.2 14.64 29.2C11.8667 29.2 9.38667 28.6 7.2 27.4C5.04 26.1733 3.34667 24.48 2.12 22.32C0.92 20.16 0.32 17.6933 0.32 14.92C0.32 12.1467 0.92 9.68 2.12 7.52C3.34667 5.33333 5.04 3.64 7.2 2.44C9.36 1.21333 11.8267 0.599998 14.6 0.599998C17.96 0.599998 20.7867 1.41333 23.08 3.04C25.4 4.66667 26.9333 6.92 27.68 9.8H20.12ZM45.2288 29.28C42.5888 29.28 40.1621 28.6667 37.9488 27.44C35.7621 26.2133 34.0154 24.5067 32.7088 22.32C31.4287 20.1067 30.7887 17.6267 30.7887 14.88C30.7887 12.1333 31.4287 9.66667 32.7088 7.48C34.0154 5.29333 35.7621 3.58667 37.9488 2.36C40.1621 1.13333 42.5888 0.52 45.2288 0.52C47.8688 0.52 50.2821 1.13333 52.4688 2.36C54.6821 3.58667 56.4154 5.29333 57.6688 7.48C58.9488 9.66667 59.5888 12.1333 59.5888 14.88C59.5888 17.6267 58.9488 20.1067 57.6688 22.32C56.3888 24.5067 54.6554 26.2133 52.4688 27.44C50.2821 28.6667 47.8688 29.28 45.2288 29.28ZM45.2288 23.04C47.4688 23.04 49.2554 22.2933 50.5887 20.8C51.9488 19.3067 52.6288 17.3333 52.6288 14.88C52.6288 12.4 51.9488 10.4267 50.5887 8.96C49.2554 7.46666 47.4688 6.72 45.2288 6.72C42.9621 6.72 41.1488 7.45333 39.7888 8.92C38.4554 10.3867 37.7888 12.3733 37.7888 14.88C37.7888 17.36 38.4554 19.3467 39.7888 20.84C41.1488 22.3067 42.9621 23.04 45.2288 23.04ZM76.6741 29.28C74.0341 29.28 71.6074 28.6667 69.3941 27.44C67.2074 26.2133 65.4607 24.5067 64.1541 22.32C62.8741 20.1067 62.2341 17.6267 62.2341 14.88C62.2341 12.1333 62.8741 9.66667 64.1541 7.48C65.4607 5.29333 67.2074 3.58667 69.3941 2.36C71.6074 1.13333 74.0341 0.52 76.6741 0.52C79.3141 0.52 81.7274 1.13333 83.9141 2.36C86.1274 3.58667 87.8607 5.29333 89.1141 7.48C90.3941 9.66667 91.0341 12.1333 91.0341 14.88C91.0341 17.6267 90.3941 20.1067 89.1141 22.32C87.8341 24.5067 86.1007 26.2133 83.9141 27.44C81.7274 28.6667 79.3141 29.28 76.6741 29.28ZM76.6741 23.04C78.9141 23.04 80.7007 22.2933 82.0341 20.8C83.3941 19.3067 84.0741 17.3333 84.0741 14.88C84.0741 12.4 83.3941 10.4267 82.0341 8.96C80.7007 7.46666 78.9141 6.72 76.6741 6.72C74.4074 6.72 72.5941 7.45333 71.2341 8.92C69.9007 10.3867 69.2341 12.3733 69.2341 14.88C69.2341 17.36 69.9007 19.3467 71.2341 20.84C72.5941 22.3067 74.4074 23.04 76.6741 23.04ZM104.999 29.28C102.946 29.28 101.106 28.9467 99.4794 28.28C97.8527 27.6133 96.546 26.6267 95.5594 25.32C94.5994 24.0133 94.0927 22.44 94.0394 20.6H101.319C101.426 21.64 101.786 22.44 102.399 23C103.013 23.5333 103.813 23.8 104.799 23.8C105.813 23.8 106.613 23.5733 107.199 23.12C107.786 22.64 108.079 21.9867 108.079 21.16C108.079 20.4667 107.839 19.8933 107.359 19.44C106.906 18.9867 106.333 18.6133 105.639 18.32C104.973 18.0267 104.013 17.6933 102.759 17.32C100.946 16.76 99.466 16.2 98.3194 15.64C97.1727 15.08 96.186 14.2533 95.3594 13.16C94.5327 12.0667 94.1194 10.64 94.1194 8.88C94.1194 6.26667 95.066 4.22667 96.9594 2.76C98.8527 1.26667 101.319 0.52 104.359 0.52C107.453 0.52 109.946 1.26667 111.839 2.76C113.733 4.22667 114.746 6.28 114.879 8.92H107.479C107.426 8.01333 107.093 7.30667 106.479 6.8C105.866 6.26667 105.079 6 104.119 6C103.293 6 102.626 6.22667 102.119 6.68C101.613 7.10666 101.359 7.73333 101.359 8.56C101.359 9.46667 101.786 10.1733 102.639 10.68C103.493 11.1867 104.826 11.7333 106.639 12.32C108.453 12.9333 109.919 13.52 111.039 14.08C112.186 14.64 113.173 15.4533 113.999 16.52C114.826 17.5867 115.239 18.96 115.239 20.64C115.239 22.24 114.826 23.6933 113.999 25C113.199 26.3067 112.026 27.3467 110.479 28.12C108.933 28.8933 107.106 29.28 104.999 29.28ZM126.289 6.4V12.08H135.449V17.36H126.289V23.52H136.649V29H119.449V0.919999H136.649V6.4H126.289Z"
          fill="white"
        />
        <path
          d="M158.089 14.6C159.716 14.9467 161.023 15.76 162.009 17.04C162.996 18.2933 163.489 19.7333 163.489 21.36C163.489 23.7067 162.663 25.5733 161.009 26.96C159.383 28.32 157.103 29 154.169 29H141.089V0.919999H153.729C156.583 0.919999 158.809 1.57333 160.409 2.88C162.036 4.18667 162.849 5.96 162.849 8.2C162.849 9.85333 162.409 11.2267 161.529 12.32C160.676 13.4133 159.529 14.1733 158.089 14.6ZM147.929 12.28H152.409C153.529 12.28 154.383 12.04 154.969 11.56C155.583 11.0533 155.889 10.32 155.889 9.36C155.889 8.4 155.583 7.66667 154.969 7.16C154.383 6.65333 153.529 6.4 152.409 6.4H147.929V12.28ZM152.969 23.48C154.116 23.48 154.996 23.2267 155.609 22.72C156.249 22.1867 156.569 21.4267 156.569 20.44C156.569 19.4533 156.236 18.68 155.569 18.12C154.929 17.56 154.036 17.28 152.889 17.28H147.929V23.48H152.969ZM180.737 29.28C178.097 29.28 175.67 28.6667 173.457 27.44C171.27 26.2133 169.523 24.5067 168.217 22.32C166.937 20.1067 166.297 17.6267 166.297 14.88C166.297 12.1333 166.937 9.66667 168.217 7.48C169.523 5.29333 171.27 3.58667 173.457 2.36C175.67 1.13333 178.097 0.52 180.737 0.52C183.377 0.52 185.79 1.13333 187.977 2.36C190.19 3.58667 191.923 5.29333 193.177 7.48C194.457 9.66667 195.097 12.1333 195.097 14.88C195.097 17.6267 194.457 20.1067 193.177 22.32C191.897 24.5067 190.163 26.2133 187.977 27.44C185.79 28.6667 183.377 29.28 180.737 29.28ZM180.737 23.04C182.977 23.04 184.763 22.2933 186.097 20.8C187.457 19.3067 188.137 17.3333 188.137 14.88C188.137 12.4 187.457 10.4267 186.097 8.96C184.763 7.46666 182.977 6.72 180.737 6.72C178.47 6.72 176.657 7.45333 175.297 8.92C173.963 10.3867 173.297 12.3733 173.297 14.88C173.297 17.36 173.963 19.3467 175.297 20.84C176.657 22.3067 178.47 23.04 180.737 23.04ZM230.702 0.919999V29H223.862V12.16L217.582 29H212.062L205.742 12.12V29H198.902V0.919999H206.982L214.862 20.36L222.662 0.919999H230.702ZM252.621 14.6C254.247 14.9467 255.554 15.76 256.541 17.04C257.527 18.2933 258.021 19.7333 258.021 21.36C258.021 23.7067 257.194 25.5733 255.541 26.96C253.914 28.32 251.634 29 248.701 29H235.621V0.919999H248.261C251.114 0.919999 253.341 1.57333 254.941 2.88C256.567 4.18667 257.381 5.96 257.381 8.2C257.381 9.85333 256.941 11.2267 256.061 12.32C255.207 13.4133 254.061 14.1733 252.621 14.6ZM242.461 12.28H246.941C248.061 12.28 248.914 12.04 249.501 11.56C250.114 11.0533 250.421 10.32 250.421 9.36C250.421 8.4 250.114 7.66667 249.501 7.16C248.914 6.65333 248.061 6.4 246.941 6.4H242.461V12.28ZM247.501 23.48C248.647 23.48 249.527 23.2267 250.141 22.72C250.781 22.1867 251.101 21.4267 251.101 20.44C251.101 19.4533 250.767 18.68 250.101 18.12C249.461 17.56 248.567 17.28 247.421 17.28H242.461V23.48H247.501Z"
          fill="#E09F3E"
        />
      </svg>
    </a>

    <div class="relative">
      <ul class="hidden md:flex space-x-8 relative cursor-pointer">
        <li @mouseenter="setUnderline" @mouseleave="resetUnderline">
          หน้าหลัก
        </li>
        <li @mouseenter="setUnderline" @mouseleave="resetUnderline">
          เกี่ยวกับเรา
        </li>
        <li @mouseenter="setUnderline" @mouseleave="resetUnderline">
          ข่าวประชาสัมพันธ์
        </li>
        <li
          class="relative"
          @mouseenter="openDropdown"
          @mouseleave="closeDropdown"
        >
          <a href="#" class="relative pb-2 cursor-pointer mr-5">ห้องพัก</a>

          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4 absolute left-13 bottom-1"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 9l-7 7-7-7"
            ></path>
          </svg>

          <ul
            v-if="isDropdownOpen"
            class="absolute bg-[#1E555C] w-48 mt-2 rounded-lg shadow-lg"
          >
            <li>
              <a href="#" class="block px-4 py-2 hover:bg-[#E09F3E]"
                >ข้อมูลห้องพัก</a
              >
            </li>
            <li>
              <a href="#" class="block px-4 py-2 hover:bg-[#E09F3E]"
                >จองห้องพัก</a
              >
            </li>
            <li>
              <a
                href="#"
                class="block px-4 py-2 hover:bg-[#E09F3E] rounded-b-lg"
                >กฎระเบียบการเข้าพัก</a
              >
            </li>
          </ul>
        </li>

        <li @mouseenter="setUnderline" @mouseleave="resetUnderline">
          <a href="#" class="relative pb-2">ติดต่อเรา</a>
        </li>

        <div
          class="absolute -bottom-1.5 h-[2px] bg-[#E09F3E]"
          :style="underlineStyle"
        ></div>
      </ul>
    </div>

    <a class="text-2xl cursor-pointer">
      <svg
        width="45"
        height="45"
        viewBox="0 0 90 90"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M44.9999 7.5C49.9245 7.49998 54.8009 8.46992 59.3506 10.3545C63.9003 12.239 68.0343 15.0012 71.5165 18.4834C74.9987 21.9656 77.761 26.0996 79.6455 30.6493C81.5301 35.199 82.5001 40.0754 82.5001 44.9999C82.5001 65.7107 65.7107 82.5001 44.9999 82.5001C24.2894 82.5001 7.5 65.7107 7.5 44.9999C7.5 24.2894 24.2894 7.5 44.9999 7.5ZM48.7501 48.7501H41.25C31.9661 48.7501 23.9957 54.3728 20.5579 62.3991C25.9973 70.0264 34.9178 75 44.9999 75C55.0821 75 64.0026 70.0264 69.4422 62.3986C66.0044 54.3728 58.034 48.7501 48.7501 48.7501ZM44.9999 18.75C38.7868 18.75 33.7499 23.7868 33.7499 30C33.7499 36.2132 38.7868 41.25 44.9999 41.25C51.2131 41.25 56.2499 36.2132 56.2499 30C56.2499 23.7868 51.2133 18.75 44.9999 18.75Z"
          fill="white"
        />
      </svg>
    </a>
  </nav>
</template>

<style scoped></style>
